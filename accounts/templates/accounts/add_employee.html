<!-- my_business_app/accounts/templates/accounts/add_employee.html -->
{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="flex items-center justify-center min-h-screen-minus-nav-footer py-12">
    <div class="bg-white rounded-xl shadow-2xl p-6 sm:p-8 w-full max-w-lg border border-blue-200">
        <h2 class="text-3xl font-bold text-center text-indigo-700 mb-6">Register New Employee</h2>

        {% if messages %}
            <ul class="mb-4">
                {% for message in messages %}
                    <li class="p-3 rounded-lg text-sm font-medium
                        {% if message.tags == 'error' %}bg-red-100 text-red-700
                        {% elif message.tags == 'success' %}bg-green-100 text-green-700
                        {% else %}bg-blue-100 text-blue-700{% endif %}">
                        {{ message }}
                    </li>
                {% endfor %}
            </ul>
        {% endif %}

        <form method="post" class="space-y-4">
            {% csrf_token %}

            {# Render non-field errors #}
            {% if form.non_field_errors %}
                <div class="bg-red-100 text-red-700 p-3 rounded-lg text-sm font-medium mb-4">
                    <p class="font-bold">Errors:</p>
                    <ul>
                        {% for error in form.non_field_errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}

            {# Render form fields manually for more control over styling #}
            <div>
                <label for="{{ form.username.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                    {{ form.username.label }}
                </label>
                {{ form.username }}
                {% if form.username.help_text %}
                    <p class="mt-1 text-xs text-gray-500">{{ form.username.help_text }}</p>
                {% endif %}
                {% for error in form.username.errors %}
                    <p class="text-red-500 text-xs mt-1">{{ error }}</p>
                {% endfor %}
            </div>

            <div>
                <label for="{{ form.email.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                    {{ form.email.label }}
                </label>
                {{ form.email }}
                {% if form.email.help_text %}
                    <p class="mt-1 text-xs text-gray-500">{{ form.email.help_text }}</p>
                {% endif %}
                {% for error in form.email.errors %}
                    <p class="text-red-500 text-xs mt-1">{{ error }}</p>
                {% endfor %}
            </div>

            <div>
                <label for="{{ form.password.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                    {{ form.password.label }}
                </label>
                {{ form.password }}
                {% if form.password.help_text %}
                    <p class="mt-1 text-xs text-gray-500">{{ form.password.help_text }}</p>
                {% endif %}
                {% for error in form.password.errors %}
                    <p class="text-red-500 text-xs mt-1">{{ error }}</p>
                {% endfor %}
            </div>

            <div>
                <label for="{{ form.password_confirm.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                    {{ form.password_confirm.label }}
                </label>
                {{ form.password_confirm }}
                {% if form.password_confirm.help_text %}
                    <p class="mt-1 text-xs text-gray-500">{{ form.password_confirm.help_text }}</p>
                {% endif %}
                {% for error in form.password_confirm.errors %}
                    <p class="text-red-500 text-xs mt-1">{{ error }}</p>
                {% endfor %}
            </div>

            <hr class="my-4 border-gray-200">

            <h3 class="text-xl font-semibold text-gray-800 mb-3">Employee Profile Details</h3>

            <div>
                <label for="{{ form.phone_number.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                    {{ form.phone_number.label }}
                </label>
                {{ form.phone_number }}
                {% if form.phone_number.help_text %}
                    <p class="mt-1 text-xs text-gray-500">{{ form.phone_number.help_text }}</p>
                {% endif %}
                {% for error in form.phone_number.errors %}
                    <p class="text-red-500 text-xs mt-1">{{ error }}</p>
                {% endfor %}
            </div>

            <div>
                <label for="{{ form.role.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                    {{ form.role.label }}
                </label>
                {{ form.role }}
                {% if form.role.help_text %}
                    <p class="mt-1 text-xs text-gray-500">{{ form.role.help_text }}</p>
                {% endif %}
                {% for error in form.role.errors %}
                    <p class="text-red-500 text-xs mt-1">{{ error }}</p>
                {% endfor %}
            </div>

            <div class="flex items-center mt-4">
                {{ form.is_active_employee }}
                <label for="{{ form.is_active_employee.id_for_label }}" class="ml-2 text-sm font-medium text-gray-700">
                    {{ form.is_active_employee.label }}
                </label>
                {% if form.is_active_employee.help_text %}
                    <p class="mt-1 text-xs text-gray-500 ml-2">{{ form.is_active_employee.help_text }}</p>
                {% endif %}
                {% for error in form.is_active_employee.errors %}
                    <p class="text-red-500 text-xs mt-1">{{ error }}</p>
                {% endfor %}
            </div>

            <button type="submit" class="w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold text-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors duration-300">
                Register Employee
            </button>
        </form>

        <p class="text-center text-sm text-gray-600 mt-4">
            <a href="{% url 'accounts:owner_dashboard' %}" class="text-indigo-600 hover:underline">Back to Dashboard</a>
        </p>
    </div>
</div>
{% endblock content %}

<style>
    /* Adjust min-height for content area */
    .min-h-screen-minus-nav-footer {
        min-height: calc(100vh - 80px - 64px); /* Approx nav height + footer height */
    }
    /* Style for Django form inputs */
    input[type="text"], input[type="password"], input[type="email"], input[type="number"], select, textarea {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 1px solid #d1d5db; /* gray-300 */
        border-radius: 0.5rem; /* rounded-lg */
        transition: all 0.15s ease-in-out;
    }
    input[type="text"]:focus, input[type="password"]:focus, input[type="email"]:focus, input[type="number"]:focus, select:focus, textarea:focus {
        border-color: #6366f1; /* indigo-500 */
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.5); /* ring-indigo-500 */
    }
    /* Specific style for checkbox */
    input[type="checkbox"] {
        width: auto; /* Override 100% width */
        margin-right: 0.5rem;
    }
</style>
