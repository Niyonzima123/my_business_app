<!-- my_business_app/templates/base.html -->
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page_title|default:"My Business App" }}</title>
    <!-- Link to Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the Inter font and general body */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Light blue-gray background */
            min-height: 100vh; /* Ensure body takes full viewport height */
            display: flex;
            flex-direction: column; /* For sticky footer */
        }
        /* Basic styling for focus states to ensure accessibility */
        input:focus, button:focus, select:focus, textarea:focus {
            outline: 2px solid theme('colors.indigo.500');
            outline-offset: 2px;
        }
        /* Ensure main content takes available space for sticky footer */
        main {
            flex-grow: 1;
        }
    </style>
</head>
<body class="text-gray-800">
    <!-- Navigation Bar - Enhanced Design -->
    <nav class="bg-gradient-to-r from-indigo-700 to-indigo-900 p-4 shadow-xl">
        <div class="container mx-auto flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0">
            <!-- Logo/App Name Section -->
            <a href="{% url 'inventory:product_list' %}" class="flex items-center space-x-3 text-white text-2xl font-bold rounded-lg px-3 py-1 hover:bg-indigo-700 transition-colors">
                {# Removed img tag for logo #}
                <span>My Business App</span>
            </a>

            <!-- Navigation Links Section -->
            <div class="flex justify-center sm:justify-end items-center gap-x-4 gap-y-2"> {# Removed flex-wrap #}
                {% if user.is_authenticated %}
                    {# Get user role for dynamic navigation #}
                    {% with user_role=user.employeeprofile.role|default:'N/A' %}
                        {# Links for Owners #}
                        {% if user_role == 'Owner' %}
                            <a href="{% url 'accounts:owner_dashboard' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Dashboard</a>
                            <a href="{% url 'inventory:pos_view' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">POS</a>
                            <a href="{% url 'accounts:sales_report' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Sales Reports</a>
                            <a href="{% url 'inventory:product_performance_report' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Product Performance</a>
                            <a href="{% url 'inventory:employee_sales_report' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Employee Sales</a>
                            <a href="{% url 'inventory:supplier_list' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Suppliers</a>
                            <a href="{% url 'inventory:purchase_order_list' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Purchase Orders</a>
                            <a href="{% url 'inventory:create_stock_adjustment' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Adjust Stock</a>
                            <a href="{% url 'inventory:customer_list' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Customers</a>
                            <a href="{% url 'admin:inventory_product_changelist' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Products Admin</a>
                            <a href="{% url 'admin:auth_user_changelist' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Users Admin</a>
                        {# Links for Cashiers #}
                        {% elif user_role == 'Cashier' %}
                            <a href="{% url 'inventory:pos_view' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">POS</a>
                            <a href="{% url 'inventory:my_sales' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">My Sales</a>
                            <a href="{% url 'inventory:customer_list' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Customers</a>
                        {# Links for Stock Managers #}
                        {% elif user_role == 'Stock Manager' %}
                            <a href="{% url 'accounts:stock_manager_dashboard' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Stock Dashboard</a>
                            <a href="{% url 'inventory:add_stock' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Add Stock</a>
                            <a href="{% url 'inventory:low_stock_alerts' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Low Stock Alerts</a>
                            <a href="{% url 'inventory:supplier_list' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Suppliers</a>
                            <a href="{% url 'inventory:purchase_order_list' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Purchase Orders</a>
                            <a href="{% url 'inventory:create_stock_adjustment' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Adjust Stock</a>
                            <a href="{% url 'admin:inventory_product_changelist' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Manage Products</a>
                        {% endif %}

                        {# Always show Admin link for staff/superusers and Logout for authenticated users #}
                        {% if user.is_staff %}
                            <a href="{% url 'admin:index' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Admin Panel</a>
                        {% endif %}
                        <form action="{% url 'accounts:logout' %}" method="post" class="inline">
                            {% csrf_token %}
                            <button type="submit" class="text-white px-4 py-2 rounded-lg font-semibold hover:bg-indigo-600 transition-colors cursor-pointer border-none bg-transparent">
                                Logout ({{ user.username }})
                            </button>
                        </form>
                    {% endwith %}
                {% else %}
                    {# Links for unauthenticated users #}
                    <a href="{% url 'accounts:login' %}" class="text-white px-4 py-2 rounded-lg hover:bg-indigo-600 transition-colors">Login</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="container mx-auto p-6 mt-4"> {# Changed p-4 to p-6 for more padding #}
        {% block content %}
        <!-- Content from child templates will be inserted here -->
        {% endblock content %}
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white text-center p-4 mt-8">
        <div class="container mx-auto">
            <p>&copy; {{"now"|date:"Y"}} My Business App. All rights reserved.</p>
        </div>
    </footer>
</body>
</html>
